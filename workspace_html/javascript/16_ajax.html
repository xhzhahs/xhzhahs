<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.addEventListener('load', bind)
        function bind(){
            document.querySelector('#btn1').addEventListener('click', function(){

                // ajax 객체 생성
                // ajax 쓰는 방법 1.
                const xhr =  new XMLHttpRequest();
            
                // 보낼 준비
                // 방식 method, 주소
                xhr.open('get', 'https://jsonplaceholder.typicode.com/users')

                // 보내기
                xhr.send()

                xhr.onload = function(){
                    console.log('다녀왔습니다.')
                    // xhr.responseText : 서버에서 응답 받은 내용이 담겨있음
                    console.log(xhr.responseText)
                    const date = JSON.parse(xhr.responseText)
                    console.log(date)
                    
                    // 첫번째 사람
                    console.log(date[0])
                    
                    // 첫번째 사람의 유저네임
                    console.log(date[0].username)
                    console.log(date[0]['username'])
                    console.log(date[0].address.geo.lat)
                    console.log(date[0]['address']['geo']['lat'])
                }
            })
            document.querySelector('#btn2').addEventListener('click', function(){
                
                const xhr =  new XMLHttpRequest();
                xhr.open('get', 'http://www.humanjobs.co.kr')
                xhr.send()
                xhr.onload = function(){
                    console.log(xhr.responseText)
                }
            })
            
            document.querySelector('#btn3').addEventListener('click', function(){
                const serviceKey ='LCSNl%2FIBqyJ3HyFLFyEiYW4se8u0qlPiQM1ql46R44NykNCSOD97GQ9uo7LvYd4gZHsVQE9uiz2HINgmh0d96A%3D%3D'
                let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst'
                url += '?serviceKey=' + serviceKey
                url += '&numOfRows=1000'   // k=v 는 key=value의 뜻
                url += '&pageNo=1'  
                url += '&dataType=JSON'  
                url += '&base_date=20250714'    // 25년 7월 14일 
                url += '&base_time=1400'        // 오후 2시
                url += '&nx=63'                 // 지역 위경도
                url += '&ny=110'                // 지역 위경도
                

                const xhr =  new XMLHttpRequest();
                xhr.open('get', url)
                xhr.send()
                xhr.onload = function(){
                    // console.log(xhr.responseText)
                    const data = JSON.parse(xhr.responseText)
                    console.log(data)
                }
            })
        }
    </script>
</head>
<body>
    <button type="button" id="btn1">ajax 실행</button>
    <button type="button" id="btn2">휴먼잡스</button>
    <button type="button" id="btn3">날씨 예보</button>
</body>
</html>